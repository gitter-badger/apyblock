#!/bin/bash
# A Shell Blocker
# Block annoying ADs with a single script.
# Copyright 2015, Federico Dami√°n Schonborn <federicodamians@gmail.com>
# License: GPLv2

# Configurations:

# Set the webpage for downloading the /etc/hosts file:
file_source="http://winhelp2002.mvps.org/hosts.txt"

# Color prompts:
bold="\e[1;34m> \e[0m\e[1m"
endc="\e[0m"

# Functions:

# Print some messages:
print_message() {
  echo -e ""$bold""$1""$endc""
}

# Print some errors:
notify_error() {
  notify-send "ashblock" "$1" -i face-sad-symbolic
  exit 1
}

# Print some success:
notify_success() {
  notify-send "ashblock" "$1" -i face-smile-symbolic
}

case $1 in
  about)
    print_message "A Shell Blocker"
    print_message "Block annoying ADs with a simple script."
    print_message "Version: 1.0.1 \"Antares\""
    print_message "License: GPLv2"
    ;;
  "")
    pkexec wget ${file_source} -O /etc/hosts
    if [ "$?" == "0" ]; then
      notify_success "Done!"
    else
      notify_error "Failed!"
    fi
    ;;
esac
